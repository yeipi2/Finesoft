@inject NavigationManager Navigation
@inject AuthenticationStateProvider AuthStateProvider

@code {
    [Parameter] public string RedirectTo { get; set; } = "/dashboard";

    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthStateProvider.GetAuthenticationStateAsync();
        var isAuth = authState.User.Identity?.IsAuthenticated == true;

        if (isAuth)
        {
            var currentUri = Navigation.ToBaseRelativePath(Navigation.Uri);

            // Evita loop si ya estás en el destino
            var target = RedirectTo.TrimStart('/');
            if (!currentUri.StartsWith(target, StringComparison.OrdinalIgnoreCase))
            {
                Navigation.NavigateTo(RedirectTo, forceLoad: true);
            }
        }
    }
}