@* fs-front/Components/Clients/Form/ServiceConfigSection.razor *@
@using fs_front.DTO

<AccordionSection Title="Configuración de Servicio"
                  IconClass="bi-gear"
                  IsComplete="@IsComplete"
                  IsExpanded="@IsExpanded"
                  OnToggle="@OnToggle">

    <div class="row g-3">
        <div class="col-md-6">
            <label for="ServiceModality" class="form-label small fw-bold">
                Modalidad de Servicio <span class="text-danger">*</span>
            </label>
            <InputSelect id="ServiceModality"
                         class="form-select form-select-sm"
                         @bind-Value="Model.ServiceMode"
                         @bind-Value:after="OnValidate">
                <option value="Por Evento">Por Evento</option>
                <option value="Mensual">Póliza Mensual</option>
            </InputSelect>
        </div>

        @if (Model.ServiceMode == "Mensual")
        {
            <div class="col-md-6">
                <label for="MonthlyRate" class="form-label small fw-bold">
                    Tarifa Mensual (MXN) <span class="text-danger">*</span>
                </label>
                <InputNumber id="MonthlyRate"
                             class="form-control form-control-sm"
                             placeholder="0.00"
                             @bind-Value="Model.MonthlyRate"
                             @bind-Value:after="OnValidate" />
                <small class="text-muted">Tarifa fija mensual para clientes con póliza</small>
                @if (ValidationErrors.ContainsKey("MonthlyRate"))
                {
                    <div class="text-danger small mt-1">
                        <i class="bi bi-exclamation-circle me-1"></i>@ValidationErrors["MonthlyRate"]
                    </div>
                }
            </div>
        }

        <div class="col-12">
            <div class="form-check form-switch">
                <InputCheckbox id="IsActive"
                               class="form-check-input"
                               @bind-Value="Model.IsActive" />
                <label class="form-check-label small fw-bold" for="IsActive">
                    Cliente Activo
                </label>
            </div>
            <small class="text-muted">Determina si el cliente puede recibir nuevos servicios</small>
        </div>
    </div>

</AccordionSection>

@code {
    [Parameter] public ClientDto Model { get; set; } = new();
    [Parameter] public Dictionary<string, string> ValidationErrors { get; set; } = new();
    [Parameter] public bool IsComplete { get; set; }
    [Parameter] public bool IsExpanded { get; set; }
    [Parameter] public EventCallback OnToggle { get; set; }
    [Parameter] public Action? OnValidate { get; set; }
}