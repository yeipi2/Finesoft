@* fs-front/Components/Employees/Form/AccessDataSection.razor *@
@using fs_front.DTO
@using fs_front.Components.Shared

<FormSection Title="Datos de Acceso al Sistema"
             IconClass="bi-person-circle"
             IsComplete="@IsComplete">

    <div class="row g-3">
        <div class="col-md-6">
            <label for="Email" class="form-label small fw-bold">
                Email / Usuario <span class="text-danger">*</span>
            </label>
            <InputText id="Email"
                       type="email"
                       class="form-control form-control-sm"
                       placeholder="correo@empresa.com"
                       Value="@Employee.Email"
                       ValueChanged="@(v => { Employee.Email = v; OnChanged?.Invoke(); })"
                       ValueExpression="@(() => Employee.Email)"
                       disabled="@IsEditMode" />
            <small class="text-muted">Usuario de acceso al sistema</small>
            <ValidationMessage For="@(() => Employee.Email)" />
        </div>

        @if (!IsEditMode)
        {
            <div class="col-md-6">
                <label for="Password" class="form-label small fw-bold">
                    Contraseña <span class="text-danger">*</span>
                </label>
                <InputText id="Password"
                           type="password"
                           class="form-control form-control-sm"
                           placeholder="Mínimo 6 caracteres"
                           Value="@Employee.Password"
                           ValueChanged="@(v => { Employee.Password = v; OnChanged?.Invoke(); })"
                           ValueExpression="@(() => Employee.Password)" />
                <ValidationMessage For="@(() => Employee.Password)" />
            </div>
        }

        <div class="col-md-6">
            <label for="RoleName" class="form-label small fw-bold">
                Rol en el Sistema <span class="text-danger">*</span>
            </label>
            <InputSelect id="RoleName"
                         class="form-select form-select-sm"
                         Value="@Employee.RoleName"
                         ValueChanged="@((string v) => { Employee.RoleName = v; OnChanged?.Invoke(); })"
                         ValueExpression="@(() => Employee.RoleName)">
                <option value="">-- Seleccionar Rol --</option>
                @foreach (var role in Roles)
                {
                    <option value="@role">@role</option>
                }
            </InputSelect>
            <ValidationMessage For="@(() => Employee.RoleName)" />
        </div>
    </div>

</FormSection>

@code {
    [Parameter] public EmployeeDto Employee { get; set; } = new();
    [Parameter] public bool IsEditMode { get; set; }
    [Parameter] public bool IsComplete { get; set; }
    [Parameter] public List<string> Roles { get; set; } = new();
    [Parameter] public Action? OnChanged { get; set; }
}
