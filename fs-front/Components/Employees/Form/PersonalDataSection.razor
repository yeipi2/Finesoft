@using fs_front.DTO

<div class="accordion-item">
    <h2 class="accordion-header" id="headingPersonal">
        <button class="accordion-button collapsed @(IsComplete ? "" : "text-danger")"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapsePersonal"
                aria-expanded="false"
                aria-controls="collapsePersonal"
                @onclick="OnToggle">
            <i class="bi bi-person-vcard me-2"></i>
            <strong>Datos Personales</strong>
            @if (!IsComplete)
            {
                <span class="badge bg-danger ms-2">Incompleto</span>
            }
            else
            {
                <i class="bi bi-check-circle-fill text-success ms-2"></i>
            }
        </button>
    </h2>
    <div id="collapsePersonal"
         class="accordion-collapse collapse @(IsExpanded ? "show" : "")"
         aria-labelledby="headingPersonal">
        <div class="accordion-body">
            <div class="row g-3">

                <div class="col-12">
                    <label for="FullName" class="form-label small fw-bold">
                        Nombre Completo <span class="text-danger">*</span>
                    </label>
                    <InputText id="FullName"
                               class="form-control form-control-sm"
                               placeholder="Juan Pérez García"
                               Value="@Employee.FullName"
                               ValueChanged="@(v => { Employee.FullName = v; OnChanged?.Invoke(); })"
                               ValueExpression="@(() => Employee.FullName)" />
                    <ValidationMessage For="@(() => Employee.FullName)" />
                </div>

                <div class="col-md-6">
                    <label for="RFC" class="form-label small fw-bold">
                        RFC <span class="text-danger">*</span>
                    </label>
                    <InputText id="RFC"
                               class="form-control form-control-sm"
                               placeholder="ABCD123456XXX"
                               Value="@Employee.RFC"
                               ValueChanged="@(v => { Employee.RFC = v; OnChanged?.Invoke(); })"
                               ValueExpression="@(() => Employee.RFC)"
                               maxlength="13" />
                    <ValidationMessage For="@(() => Employee.RFC)" />
                </div>

                <div class="col-md-6">
                    <label for="CURP" class="form-label small fw-bold">CURP</label>
                    <InputText id="CURP"
                               class="form-control form-control-sm"
                               placeholder="ABCD123456HDFXXX00"
                               @bind-Value="Employee.CURP"
                               maxlength="18" />
                    <ValidationMessage For="@(() => Employee.CURP)" />
                </div>

                <div class="col-md-6">
                    <label for="Phone" class="form-label small fw-bold">Teléfono</label>
                    <InputText id="Phone"
                               class="form-control form-control-sm"
                               placeholder="+52 123 456 7890"
                               @bind-Value="Employee.Phone" />
                    <ValidationMessage For="@(() => Employee.Phone)" />
                </div>

                <div class="col-md-6">
                    <label for="Address" class="form-label small fw-bold">Dirección</label>
                    <InputText id="Address"
                               class="form-control form-control-sm"
                               placeholder="Calle, Colonia, Ciudad"
                               @bind-Value="Employee.Address" />
                </div>

            </div>
        </div>
    </div>
</div>

@code {
    [Parameter] public EmployeeDto Employee { get; set; } = new();
    [Parameter] public bool IsExpanded { get; set; }
    [Parameter] public bool IsComplete { get; set; }
    [Parameter] public Action? OnChanged { get; set; }
    [Parameter] public EventCallback OnToggle { get; set; }
}
