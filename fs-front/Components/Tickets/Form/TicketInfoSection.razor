@* Sección acordeón: Información del Ticket (Título + Descripción) *@
@using fs_front.DTO

<div class="accordion-item">
    <h2 class="accordion-header" id="headingInfo">
        <button class="accordion-button @(IsComplete ? "" : "text-danger")"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseInfo"
                aria-expanded="true"
                aria-controls="collapseInfo">
            <i class="bi bi-ticket-detailed me-2"></i>
            <strong>Información del Ticket</strong>
            @if (!IsComplete)
            {
                <span class="badge bg-danger ms-2">Incompleto</span>
            }
            else
            {
                <i class="bi bi-check-circle-fill text-success ms-2"></i>
            }
        </button>
    </h2>
    <div id="collapseInfo"
         class="accordion-collapse collapse show"
         aria-labelledby="headingInfo"
         data-bs-parent="#ticketAccordion">
        <div class="accordion-body">
            <div class="row g-3">

                <div class="col-12">
                    <label for="Title" class="form-label small fw-bold">
                        Título <span class="text-danger">*</span>
                    </label>
                    <InputText id="Title"
                               class="form-control form-control-sm"
                               placeholder="Problema con el sistema de facturación"
                               Value="@Model.Title"
                               ValueChanged="@(v => { Model.Title = v; OnChange.InvokeAsync(); })"
                               ValueExpression="@(() => Model.Title)" />
                    <ValidationMessage For="@(() => Model.Title)" />
                </div>

                <div class="col-12">
                    <label for="Description" class="form-label small fw-bold">
                        Descripción <span class="text-danger">*</span>
                    </label>
                    <InputTextArea id="Description"
                                   class="form-control form-control-sm"
                                   rows="4"
                                   placeholder="Describe detalladamente el problema o solicitud..."
                                   Value="@Model.Description"
                                   ValueChanged="@(v => { Model.Description = v; OnChange.InvokeAsync(); })"
                                   ValueExpression="@(() => Model.Description)" />
                    <ValidationMessage For="@(() => Model.Description)" />
                </div>

            </div>
        </div>
    </div>
</div>

@code {
    [Parameter, EditorRequired] public TicketDto Model { get; set; } = default!;
    [Parameter] public bool IsComplete { get; set; }
    [Parameter] public EventCallback OnChange { get; set; }
}
