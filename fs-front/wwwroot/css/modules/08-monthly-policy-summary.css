/* ── Forzar dialog de Radzen a no cortar ── */
.rz-dialog-content {
    padding: 0 !important;
    overflow: hidden !important;
}

.rz-dialog {
    max-height: 90vh !important;
}

/* ══════════════════════════════════════════
           VARIABLES DE TEMA — se aplican al wrapper
           ══════════════════════════════════════════ */
.mpd {
    /* Modo claro (default) */
    --mpd-bg: #ffffff;
    --mpd-surface: #ffffff;
    --mpd-surface-2: #f8fafc;
    --mpd-border: #e2e8f0;
    --mpd-border-2: #cbd5e1;
    --mpd-text: #0f172a;
    --mpd-text-2: #374151;
    --mpd-muted: #64748b;
    --mpd-muted-2: #94a3b8;
    --mpd-pill-bg: #dbeafe;
    --mpd-pill-color: #1d4ed8;
    --mpd-sel-bg: #eff6ff;
    --mpd-done-bg: #f8fafc;
    --mpd-toolbar-bg: #ffffff;
    --mpd-footer-bg: #ffffff;
    --mpd-alert-bg: #fef2f2;
    --mpd-alert-color: #991b1b;
    --mpd-t-item-bg: #f8fafc;
    --mpd-center-bg: #ffffff;
    --mpd-bar-track: #e2e8f0;
    --mpd-list-bg: #f8fafc;
    --mpd-btn-sec-bg: #f1f5f9;
    --mpd-btn-sec-col: #475569;
    --mpd-btn-sec-hov: #e2e8f0;
    --mpd-b-ok-bg: #dcfce7;
    --mpd-b-ok-col: #166534;
    --mpd-b-warn-bg: #fef9c3;
    --mpd-b-warn-col: #854d0e;
    --mpd-b-exc-bg: #ffedd5;
    --mpd-b-exc-col: #9a3412;
    --mpd-b-crit-bg: #fee2e2;
    --mpd-b-crit-col: #991b1b;
    --mpd-b-done-bg: #f1f5f9;
    --mpd-b-done-col: #64748b;
    --mpd-b-can-bg: #fef3c7;
    --mpd-b-can-col: #92400e;
    --mpd-ial-d-bg: #fef2f2;
    --mpd-ial-d-col: #b91c1c;
    --mpd-ial-w-bg: #fffbeb;
    --mpd-ial-w-col: #92400e;
    display: flex;
    flex-direction: column;
    width: 100%;
    font-family: 'Segoe UI', system-ui, sans-serif;
    background: var(--mpd-surface);
    overflow: hidden;
}

/* Modo oscuro — sobreescribe variables */
[data-theme="dark"] .mpd {
    --mpd-bg: #0f0f1a;
    --mpd-surface: #1e1e35;
    --mpd-surface-2: #252545;
    --mpd-border: #2d2d4e;
    --mpd-border-2: #3d3d6e;
    --mpd-text: #f1f1f1;
    --mpd-text-2: #e2e8f0;
    --mpd-muted: #a0aec0;
    --mpd-muted-2: #6b7280;
    --mpd-pill-bg: #1e3a5f;
    --mpd-pill-color: #93c5fd;
    --mpd-sel-bg: #1a2540;
    --mpd-done-bg: #16162a;
    --mpd-toolbar-bg: #1e1e35;
    --mpd-footer-bg: #1e1e35;
    --mpd-alert-bg: rgba(239,68,68,.12);
    --mpd-alert-color: #fca5a5;
    --mpd-t-item-bg: #252545;
    --mpd-center-bg: #1e1e35;
    --mpd-bar-track: #2d2d4e;
    --mpd-list-bg: #16162a;
    --mpd-btn-sec-bg: #252545;
    --mpd-btn-sec-col: #a0aec0;
    --mpd-btn-sec-hov: #2d2d4e;
    --mpd-b-ok-bg: rgba(22,163,74,.18);
    --mpd-b-ok-col: #86efac;
    --mpd-b-warn-bg: rgba(234,179,8,.15);
    --mpd-b-warn-col: #fde047;
    --mpd-b-exc-bg: rgba(249,115,22,.15);
    --mpd-b-exc-col: #fdba74;
    --mpd-b-crit-bg: rgba(239,68,68,.15);
    --mpd-b-crit-col: #fca5a5;
    --mpd-b-done-bg: #252545;
    --mpd-b-done-col: #a0aec0;
    --mpd-b-can-bg: rgba(245,158,11,.15);
    --mpd-b-can-col: #fcd34d;
    --mpd-ial-d-bg: rgba(239,68,68,.12);
    --mpd-ial-d-col: #fca5a5;
    --mpd-ial-w-bg: rgba(245,158,11,.12);
    --mpd-ial-w-col: #fcd34d;
}

/* ── Dashboard ── */
.mpd-dash {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
    padding: 16px 20px;
    background: var(--mpd-surface);
    border-bottom: 1px solid var(--mpd-border);
}

.mpd-stat {
    background: var(--mpd-surface-2);
    border: 1px solid var(--mpd-border);
    border-radius: 10px;
    padding: 12px 14px;
}

.mpd-stat-lbl {
    font-size: .7rem;
    text-transform: uppercase;
    font-weight: 700;
    color: var(--mpd-muted);
    margin-bottom: 4px;
}

.mpd-stat-num {
    font-size: 1.6rem;
    font-weight: 800;
    color: var(--mpd-text);
    line-height: 1.1;
}

.mpd-stat-sub {
    font-size: .75rem;
    color: var(--mpd-muted-2);
}

.mpd-stat.s-period {
    border-color: rgba(167,139,250,.4);
}

.mpd-stat.s-pending {
    border-color: rgba(96,165,250,.4);
}

.mpd-stat.s-done {
    border-color: rgba(52,211,153,.4);
}

.mpd-stat.s-crit {
    border-color: rgba(248,113,113,.4);
}

.mpd-stat.s-period .mpd-stat-num {
    color: #7c3aed;
}

.mpd-stat.s-pending .mpd-stat-num {
    color: #2563eb;
}

.mpd-stat.s-done .mpd-stat-num {
    color: #16a34a;
}

.mpd-stat.s-crit .mpd-stat-num {
    color: #dc2626;
}

/* ── Alerta crítica ── */
.mpd-alert-crit {
    background: var(--mpd-alert-bg);
    border-left: 3px solid #ef4444;
    color: var(--mpd-alert-color);
    font-size: .78rem;
    padding: 10px 16px;
    display: flex;
    align-items: flex-start;
    gap: 7px;
    flex-shrink: 0;
}

/* ── Toolbar ── */
.mpd-toolbar {
    background: var(--mpd-toolbar-bg);
    border-bottom: 1px solid var(--mpd-border);
    padding: 9px 20px;
    display: flex;
    align-items: center;
    gap: 10px;
    flex-shrink: 0;
}

.mpd-sel-all {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: .8rem;
    font-weight: 600;
    color: var(--mpd-muted);
    cursor: pointer;
    user-select: none;
}

    .mpd-sel-all input {
        width: 15px;
        height: 15px;
        accent-color: #2563eb;
        cursor: pointer;
    }

.mpd-count-pill {
    background: var(--mpd-pill-bg);
    color: var(--mpd-pill-color);
    font-size: .7rem;
    font-weight: 700;
    padding: 2px 8px;
    border-radius: 12px;
}

/* ── Lista scrollable ── */
.mpd-list {
    overflow-y: auto;
    padding: 10px 14px;
    display: flex;
    flex-direction: column;
    gap: 7px;
    max-height: calc(90vh - 310px);
    min-height: 180px;
    background: var(--mpd-list-bg);
}

/* Scrollbar en dark */
[data-theme="dark"] .mpd-list::-webkit-scrollbar {
    width: 6px;
}

[data-theme="dark"] .mpd-list::-webkit-scrollbar-track {
    background: #1e1e35;
}

[data-theme="dark"] .mpd-list::-webkit-scrollbar-thumb {
    background: #2d2d4e;
    border-radius: 3px;
}

/* ── Card ── */
.mpd-card {
    background: var(--mpd-surface);
    border: 1.5px solid var(--mpd-border);
    border-radius: 10px;
    padding: 12px 14px;
    cursor: pointer;
    transition: border-color .12s, box-shadow .12s;
}

    .mpd-card:hover:not(.mpd-card-done) {
        border-color: var(--mpd-border-2);
        box-shadow: 0 1px 6px rgba(0,0,0,.08);
    }

    .mpd-card.mpd-card-sel {
        border-color: #2563eb;
        background: var(--mpd-sel-bg);
        box-shadow: 0 0 0 3px rgba(37,99,235,.1);
    }

    .mpd-card.mpd-card-done {
        opacity: .5;
        cursor: default;
        background: var(--mpd-done-bg);
    }

    .mpd-card.mpd-card-cancelled {
        border-left: 3px solid #f59e0b;
    }

.mpd-card-top {
    display: flex;
    align-items: center;
    gap: 8px;
}

.mpd-card-name {
    flex: 1;
    font-weight: 700;
    font-size: .86rem;
    color: var(--mpd-text);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.mpd-card-rate {
    font-size: .78rem;
    font-weight: 700;
    color: var(--mpd-text-2);
    flex-shrink: 0;
}

/* ── Badges ── */
.mpd-b {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    font-size: .63rem;
    font-weight: 700;
    padding: 2px 7px;
    border-radius: 12px;
    text-transform: uppercase;
    letter-spacing: .04em;
    flex-shrink: 0;
}

.b-ok {
    background: var(--mpd-b-ok-bg);
    color: var(--mpd-b-ok-col);
}

.b-warn {
    background: var(--mpd-b-warn-bg);
    color: var(--mpd-b-warn-col);
}

.b-exc {
    background: var(--mpd-b-exc-bg);
    color: var(--mpd-b-exc-col);
}

.b-crit {
    background: var(--mpd-b-crit-bg);
    color: var(--mpd-b-crit-col);
}

.b-done {
    background: var(--mpd-b-done-bg);
    color: var(--mpd-b-done-col);
}

.b-can {
    background: var(--mpd-b-can-bg);
    color: var(--mpd-b-can-col);
}

/* ── Hours bar ── */
.mpd-bar-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 9px;
}

.mpd-bar {
    flex: 1;
    height: 5px;
    background: var(--mpd-bar-track);
    border-radius: 3px;
    overflow: hidden;
}

.mpd-bar-fill {
    height: 100%;
    border-radius: 3px;
    transition: width .3s ease;
}

.mpd-bar-label {
    font-size: .71rem;
    font-weight: 600;
    white-space: nowrap;
    color: var(--mpd-muted);
    min-width: 110px;
    text-align: right;
}

    .mpd-bar-label.over {
        color: #ef4444;
    }

/* ── Inline alerts ── */
.mpd-inline-alert {
    font-size: .73rem;
    padding: 6px 9px;
    border-radius: 6px;
    margin-top: 7px;
    display: flex;
    gap: 5px;
    align-items: flex-start;
}

.ial-danger {
    background: var(--mpd-ial-d-bg);
    color: var(--mpd-ial-d-col);
    border-left: 2px solid #ef4444;
}

.ial-warning {
    background: var(--mpd-ial-w-bg);
    color: var(--mpd-ial-w-col);
    border-left: 2px solid #f59e0b;
}

/* ── Tickets ── */
.mpd-tickets {
    margin-top: 8px;
}

    .mpd-tickets summary {
        list-style: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: .73rem;
        font-weight: 600;
        color: #3b82f6;
        padding: 3px 0;
    }

        .mpd-tickets summary::-webkit-details-marker {
            display: none;
        }

.mpd-t-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: .72rem;
    padding: 4px 6px;
    border-radius: 5px;
    background: var(--mpd-t-item-bg);
    margin-top: 3px;
    border: 1px solid var(--mpd-border);
}

.mpd-t-id {
    color: #3b82f6;
    font-weight: 700;
    flex-shrink: 0;
}

.mpd-t-title {
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    color: var(--mpd-text-2);
}

.mpd-t-proj {
    color: var(--mpd-muted-2);
    font-size: .65rem;
    flex-shrink: 0;
    max-width: 80px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.mpd-t-st {
    font-size: .62rem;
    padding: 1px 5px;
    border-radius: 3px;
    background: var(--mpd-surface-2);
    color: var(--mpd-muted);
    flex-shrink: 0;
}

.mpd-t-hrs {
    font-weight: 700;
    color: var(--mpd-muted);
    flex-shrink: 0;
    font-size: .7rem;
}

.mpd-no-tickets {
    font-size: .71rem;
    color: var(--mpd-muted-2);
    margin-top: 7px;
    display: flex;
    align-items: center;
    gap: 4px;
}

/* ── Footer ── */
.mpd-footer {
    background: var(--mpd-footer-bg);
    border-top: 1px solid var(--mpd-border);
    padding: 10px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    flex-shrink: 0;
}

.mpd-legend {
    display: flex;
    gap: 5px;
    flex-wrap: wrap;
    align-items: center;
}

.mpd-btns {
    display: flex;
    gap: 8px;
    align-items: center;
}

/* ── Botones ── */
.mpd-btn {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    font-size: .8rem;
    font-weight: 600;
    padding: 8px 16px;
    border-radius: 7px;
    border: none;
    cursor: pointer;
    transition: all .12s;
    white-space: nowrap;
}

    .mpd-btn:active:not(:disabled) {
        transform: scale(.97);
    }

    .mpd-btn:disabled {
        opacity: .45;
        cursor: not-allowed;
    }

.mpd-btn-sec {
    background: var(--mpd-btn-sec-bg);
    color: var(--mpd-btn-sec-col);
}

    .mpd-btn-sec:hover:not(:disabled) {
        background: var(--mpd-btn-sec-hov);
    }

.mpd-btn-pri {
    background: #2563eb;
    color: #fff;
    box-shadow: 0 2px 6px rgba(37,99,235,.35);
}

    .mpd-btn-pri:hover:not(:disabled) {
        background: #1d4ed8;
        box-shadow: 0 3px 10px rgba(37,99,235,.4);
    }

/* ── Spinners ── */
.mpd-spin {
    width: 13px;
    height: 13px;
    border: 2px solid rgba(255,255,255,.3);
    border-top-color: #fff;
    border-radius: 50%;
    animation: _spin .6s linear infinite;
    flex-shrink: 0;
}

@keyframes _spin {
    to {
        transform: rotate(360deg);
    }
}

.mpd-spin-lg {
    width: 32px;
    height: 32px;
    border: 3px solid var(--mpd-bar-track);
    border-top-color: #2563eb;
    border-radius: 50%;
    animation: _spin .7s linear infinite;
}

/* ── Estado vacío / cargando ── */
.mpd-center {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 48px 20px;
    gap: 10px;
    color: var(--mpd-muted-2);
    text-align: center;
    background: var(--mpd-center-bg);
}

    .mpd-center strong {
        color: var(--mpd-text);
    }
